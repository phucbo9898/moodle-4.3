{"version":3,"file":"clipboard.min.js","sources":["../src/clipboard.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n\n/**\n * @author     Andreas Grabs <moodle@grabs-edv.de>\n * @copyright  2022 Andreas Grabs\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\n// With this module we make sure that cascaded modal boxes and there backdrop have the right z-index.\ndefine(['jquery'], function($) {\n\n    var copyToClipboard = function(elem, id) {\n        // Create hidden text element, if it doesn't already exist.\n        var targetId = \"hiddenCopyText-\" + id;\n\n        // Must use a temporary form element for the selection and copy.\n        var target = document.getElementById(targetId);\n        if (!target) {\n            target = document.createElement(\"textarea\");\n            target.style.position = \"absolute\";\n            target.style.left = \"-9999px\";\n            target.style.top = \"0\";\n            target.id = targetId;\n            document.body.appendChild(target);\n        }\n        target.textContent = elem.text();\n\n        // Select the content.\n        var currentFocus = document.activeElement;\n        target.focus();\n        target.setSelectionRange(0, target.value.length);\n\n        // Copy the selection.\n        var succeed;\n        try {\n            succeed = document.execCommand(\"copy\");\n        } catch (e) {\n            succeed = false;\n        }\n        // Restore original focus.\n        if (currentFocus && typeof currentFocus.focus === \"function\") {\n            currentFocus.focus();\n        }\n\n        // Clear temporary content.\n        target.textContent = \"\";\n\n        return succeed;\n    };\n\n    return {\n        // Initialize our module.\n        init: function(buttonid, txtid, id, title, msg) {\n            $('#' + buttonid).on('click', function() {\n                /* Get the text field */\n                copyToClipboard($('#' + txtid), id);\n\n                // Show a popover.\n                $('#' + txtid).popover({\n                    title: title,\n                    content: msg,\n                    placement: \"top\"\n                });\n                $('#' + txtid).popover('show');\n                setTimeout(function() {\n                    $('#' + txtid).popover('hide');\n                }, 3000);\n\n            });\n        }\n    };\n});"],"names":["define","$","init","buttonid","txtid","id","title","msg","on","elem","targetId","target","document","getElementById","createElement","style","position","left","top","body","appendChild","textContent","text","succeed","currentFocus","activeElement","focus","setSelectionRange","value","length","execCommand","e","copyToClipboard","popover","content","placement","setTimeout"],"mappings":";;;;;AAuBAA,oCAAO,CAAC,WAAW,SAASC,SAyCjB,CAEHC,KAAM,SAASC,SAAUC,MAAOC,GAAIC,MAAOC,KACvCN,EAAE,IAAME,UAAUK,GAAG,SAAS,YA1ChB,SAASC,KAAMJ,QAE7BK,SAAW,kBAAoBL,GAG/BM,OAASC,SAASC,eAAeH,UAChCC,UACDA,OAASC,SAASE,cAAc,aACzBC,MAAMC,SAAW,WACxBL,OAAOI,MAAME,KAAO,UACpBN,OAAOI,MAAMG,IAAM,IACnBP,OAAON,GAAKK,SACZE,SAASO,KAAKC,YAAYT,SAE9BA,OAAOU,YAAcZ,KAAKa,WAQtBC,QALAC,aAAeZ,SAASa,cAC5Bd,OAAOe,QACPf,OAAOgB,kBAAkB,EAAGhB,OAAOiB,MAAMC,YAKrCN,QAAUX,SAASkB,YAAY,QACjC,MAAOC,GACLR,SAAU,EAGVC,cAA8C,mBAAvBA,aAAaE,OACpCF,aAAaE,QAIjBf,OAAOU,YAAc,GAUbW,CAAgB/B,EAAE,IAAMG,OAAQC,IAGhCJ,EAAE,IAAMG,OAAO6B,QAAQ,CACnB3B,MAAOA,MACP4B,QAAS3B,IACT4B,UAAW,QAEflC,EAAE,IAAMG,OAAO6B,QAAQ,QACvBG,YAAW,WACPnC,EAAE,IAAMG,OAAO6B,QAAQ,UACxB"}